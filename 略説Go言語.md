# 略説Go言語

Go言語はGoogleが開発したコンパイル型言語である。
軽量で簡単なマルチスレッドや厳密な例外処理を得意としている。

## ソースコード

以下は標準出力に`Hello World`と表示するソースコードである

```go
package main

import "fmt"

func main() {
    fmt.Println("Hello world")
}
```

`package main` これはパッケージ宣言。最初の行でソースコードが所属するパッケージを書く。
後に述べる`import`文は外部のプログラムをパッケージ単位で取り込む。
パッケージは関数、定数、型、インターフェイスの集合である。

`import "fmt"` fmtという標準パッケージを取り込んでいる。
このパッケージは書式付き文字列出力を扱う関数の集合である。
同一パッケージの関数、定数、型、インターフェイスは名前だけで使用できる。
外部パッケージは`import`文で取り込んだ後`fmt.Println`のように`パッケージ.名前`というコードで使用できる。

`func main(){...}` func 関数名(引数) 戻り値{}の書式で関数を宣言する
go言語のプログラムの起点は必ずmainパッケージのmain関数、`main.main()`である。


## ディレクトリ構成

同一ディレクトリ直下のソースコードは同一パッケージに所属していないとコンパイルエラーになる。
一般的にパッケージ名とディレクトリ名は揃えるが異なってもエラーにならない
例えばgoodディレクトリの中でbestパッケージを宣言してみると、
`import`文はディレクトリ名で指定し使用する際はパッケージ名で指定するので分かり難い。

```go
package main

import "good"

func main() {
	// good.DoBest(1000)  // パッケージ宣言は best なので、goodという名前では参照できない
	best.DoBest(1000) // これは大丈夫
}
```

## Go Module

go1.12より導入。mainパッケージのディレクトリで`go mod init` というコマンドを叩くと、
依存するパッケージとバージョンのリストが記載された二つのファイル `go.mod` `go.sum` が作られる。
二つのファイルはコンパイルする際に自動で書き変わるので人間が編集する必要はない。
`~/go/pkg`以下に指定バージョンのコンパイル済み依存パッケージがダウンロードされるのでコンパイルが高速化する。

go1.11以前は`~/go/src`以下に開発中ソースコードも依存パッケージも全て格納される規則だったので不自由だったが
Go Module の導入で依存パッケージのソースコードを格納する必要がなくなり`~/go/src` は廃止され、
Go Module が有ればどこでも開発して良いことになった。